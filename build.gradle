buildscript {
    repositories {
        mavenLocal()
        maven {
            url "http://maven.aliyun.com/nexus/content/repositories/jcenter/"
        }
        mavenCentral()
    }

    dependencies {
        classpath "com.bmuschko:gradle-docker-plugin:3.0.8"
        classpath "org.springframework.boot:spring-boot-gradle-plugin:$springBootVersion"
        classpath "com.google.protobuf:protobuf-gradle-plugin:$pbGradlePlugin"
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = "3.2"
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'idea'

    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = sourceCompatibility

    buildDir = new File(
            rootProject.projectDir, "build/" + project.name
    )
}

subprojects {
    repositories {
        mavenLocal()
        maven {
            url "http://maven.aliyun.com/nexus/content/repositories/jcenter/"
        }
        mavenCentral()
    }

    dependencies {
        compile "org.projectlombok:lombok:$lombokVersion"
        compile "org.apache.commons:commons-lang3:$commonsLang3Version"
        compile "com.google.guava:guava:$guavaVersion"

        testCompile "org.springframework.boot:spring-boot-starter-test:$springBootVersion"
        testCompile "junit:junit:4.12"
    }
}